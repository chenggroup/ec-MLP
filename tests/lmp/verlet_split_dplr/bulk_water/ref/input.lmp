variable        NSTEPS          equal 100
variable        DT              equal 0.0005
variable        BETA            equal 0.4
variable        KMESH_X         equal 64
variable        KMESH_Y         equal 64
variable        KMESH_Z         equal 64
variable        THERMO_FREQ     equal 1
variable        DUMP_FREQ       equal 10
variable        TEMP            equal 300.000000
variable        SEED            equal 1

units           metal
boundary        p p p
atom_style      full

read_data       ../system.data
restart         50000 system.restart

# O H X
mass            1 15.9994
mass            2 1.008
mass            3 0.0001

group           real_atom type 1 2
group           virtual_atom type 3

neighbor        2.0 bin
neigh_modify    every 1 delay 0 check no exclude group real_atom virtual_atom

pair_style      deepmd ../graph.pb
pair_coeff      * *

bond_style      zero
bond_coeff      *
special_bonds   lj/coul 1 1 1 angle no

kspace_style    pppm/dplr 1e-5
kspace_modify   gewald ${BETA} diff ik mesh ${KMESH_X} ${KMESH_Y} ${KMESH_Z}

velocity        all create ${TEMP} ${SEED}
velocity        all scale ${TEMP}

compute		real_temp real_atom temp
fix		1 real_atom nvt temp ${TEMP} ${TEMP} $(100*dt)
fix_modify	1 temp real_temp

fix             fdplr all dplr model ../graph.pb type_associate 1 3 bond_type 1

thermo          ${THERMO_FREQ}

dump            TRAJ real_atom custom ${DUMP_FREQ} dump.lammpstrj id element xu yu zu fx fy fz vx vy vz
dump_modify     TRAJ element O H X sort id

timestep        ${DT}

run             ${NSTEPS}
